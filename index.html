<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>打工薪資紀錄器 - 極簡版</title>
    <link rel="stylesheet" href="styles.css"> 
</head>
<body>
    <div class="container">
        
        <header class="top-summary-bar" id="mainHeader">
            <h1 id="currentMonthTitle">2025年11月</h1>
            
            <div class="summary-grid">
                <div class="sum-card">
                    <p>總工時</p>
                    <span class="value primary-color" id="totalHoursDisplay">0h</span>
                </div>
                <div class="sum-card">
                    <p>預計收入 (未扣)</p>
                    <span class="value secondary-color" id="totalSalaryDisplay">0元</span>
                </div>
                <div class="sum-card">
                    <p>實際收入 (淨額)</p>
                    <span class="value net-salary-color" id="netSalaryDisplay">0元</span>
                </div>
            </div>
        </header>

        <section class="settings-panel" id="settingsPage">
            <h2>個人設定</h2>
            <div class="input-group">
                <label for="hourlyRate">時薪 (NT$):</label>
                <input type="number" id="hourlyRate" value="183" min="0" placeholder="設定您的時薪">
            </div>
            <div class="input-group">
                <label for="insuranceDeduction">勞保/其他扣款 (NT$):</label>
                <input type="number" id="insuranceDeduction" value="1000" min="0" placeholder="每月固定扣款金額">
            </div>
             <button onclick="saveCurrentMonthSummary()" class="btn-primary" style="margin-top: 15px;">儲存本月結算為歷史</button>
        </section>

        <section class="history-page page-content" id="historyPage">
            <h2>📜 歷史紀錄總覽</h2>
            <ul id="historyList">
                </ul>
            <button onclick="clearAllHistory()" class="btn-clear" style="margin-top: 20px;">清除所有歷史紀錄</button>
        </section>


        <main class="calendar-section page-content active" id="calendarPage">
            <div class="calendar-nav">
                <button onclick="changeMonth(-1)" class="nav-button">&#9664; 上個月</button>
                <button onclick="changeMonth(1)" class="nav-button">下個月 &#9654;</button>
            </div>
            
            <div class="weekdays">
                <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
            </div>
            
            <div id="calendarDisplay" class="calendar-grid">
                </div>
        </main>
        
        <section class="edit-panel" id="editPanel">
            <h2>編輯 <span id="selectedDateTitle">(點擊日期)</span></h2>
            
            <div id="currentLogInfo">
                </div>
            
            <div class="slider-inputs">
                <label>工時 (小時): <span id="workHoursValue">8</span></label>
                <input type="range" id="workHoursSlider" min="0" max="12" value="8" step="1" oninput="updateTimeDisplay()">
                
                <label>工時 (分鐘): <span id="workMinutesValue">00</span></label>
                <input type="range" id="workMinutesSlider" min="0" max="59" value="0" step="5" oninput="updateTimeDisplay()">
            </div>
            
            <div class="action-buttons">
                <button onclick="saveDailyLog('工時')" class="btn-save">儲存工時</button> 
                <button onclick="saveDailyLog('排休')" class="btn-leave">排休</button>
                <button onclick="saveDailyLog('請假')" class="btn-leave">請假</button>
                <button onclick="clearDailyLog()" class="btn-clear">清除紀錄</button>
            </div>
        </section>

    </div>

    <nav class="bottom-nav">
        <button onclick="showPage('calendarPage')" class="nav-item active" id="nav-calendar">
            <span class="nav-icon">📅</span>
            <span class="nav-text">日曆</span>
        </button>
        <button onclick="showPage('settingsPage')" class="nav-item" id="nav-settings">
            <span class="nav-icon">⚙️</span>
            <span class="nav-text">設定</span>
        </button>
        <button onclick="showPage('historyPage')" class="nav-item" id="nav-history">
            <span class="nav-icon">📜</span>
            <span class="nav-text">歷史</span>
        </button>
    </nav>
